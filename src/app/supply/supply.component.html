<h2>Суммарный доход фирмы: {{income}}</h2>
<h2 *ngIf="incomeOnDate != null && firstDate !== '' && !isBetween">Результат по дате ({{firstDate}}): {{incomeOnDate}}</h2>
<h2 *ngIf="incomeOnDate != null && firstDate !== '' && secondDate !== '' && isBetween">Результат по промежутку дат (от {{firstDate}} до {{secondDate}}): {{incomeOnDate}}</h2>
<input *ngIf="supplyToUpdate == null" class="regular" type="date" [(ngModel)]="firstDate" name="firstDateOfIncome" />
<input *ngIf="supplyToUpdate == null && isBetween" class="regular" type="date" [(ngModel)]="secondDate" name="secondDateOfIncome" />
<button *ngIf="supplyToUpdate == null" class="regular" (click)="isBetween ? getIncomeBetween(firstDate, secondDate) : getIncome(firstDate)">Рассчитать</button>
<input *ngIf="supplyToUpdate == null" type="checkbox" name="checkSecondDate" [(ngModel)]="isBetween"/>Рассчет дохода в промежутке дат<br>
<select *ngIf="supplyToUpdate == null" class="regular" [(ngModel)]="field" name="fieldToFind">
  <option value="supplier">Поставщик</option>
  <option value="part">Запчасть</option>
  <option value="amount">Количество</option>
  <option value="date">Дата</option>
</select>
<input *ngIf="supplyToUpdate == null" class="regular" type="text" [(ngModel)]="value" name="valueToFind" />
<button *ngIf="supplyToUpdate == null" class="regular" (click)="find()">Найти</button>
<button *ngIf="supplyToUpdate == null" class="regular" (click)="load()">Отмена</button>
<br>
<form *ngIf="supplyToUpdate == null" name="form" (ngSubmit)="f.form.valid && create(f)" #f="ngForm" novalidate>
  <select class="regular" [(ngModel)]="supply.supplier" name="supplier" required>
    <option *ngFor="let supplier of suppliers" [value]="supplier.id">{{supplier.name}}</option>
  </select>
  <select class="regular" [(ngModel)]="supply.part" name="part" required>
    <option *ngFor="let part of parts" [value]="part.id">{{part.name}}</option>
  </select>
  <input class="regular" type="number" [(ngModel)]="supply.amount" name="amount" placeholder="Количество" required />
  <input class="regular" type="date" [(ngModel)]="supply.date" name="date" required />
  <button class="regular">Добавить</button>
  <br><br>
</form>
<table border="1" cellspacing="0" cellpadding="5">
  <thead>
    <th>ID</th>
    <th>Поставщик</th>
    <th>Запчасть</th>
    <th>Количество</th>
    <th>Дата</th>
    <th *ngIf="supplyToUpdate == null" colspan="2">Редактирование</th>
  </thead>
  <tbody>
    <tr *ngFor="let row of supplies" align="center">
      <td>{{row.id}}</td>
      <td>
        <span *ngIf="supplyToUpdate == null || supplyToUpdate.id != row.id">{{row.supplier.name}}</span>
        <span *ngIf="supplyToUpdate != null && supplyToUpdate.id == row.id">
          <select class="tab" [(ngModel)]="supplyToUpdate.supplier" name="supplierUpd">
            <option *ngFor="let sup of suppliers" [value]="sup.id">{{sup.name}}</option>
          </select>
        </span>
      </td>
      <td>
        <span *ngIf="supplyToUpdate == null || supplyToUpdate.id != row.id">{{row.part.name}}</span>
        <span *ngIf="supplyToUpdate != null && supplyToUpdate.id == row.id">
          <select class="tab" [(ngModel)]="supplyToUpdate.part" name="partUpd">
            <option *ngFor="let prt of parts" [value]="prt.id">{{prt.name}}</option>
          </select>
        </span>
      </td>
      <td>
        <span *ngIf="supplyToUpdate == null || supplyToUpdate.id != row.id">{{row.amount}}</span>
        <span *ngIf="supplyToUpdate != null && supplyToUpdate.id == row.id">
          <input class="tab" type="text" [(ngModel)]="supplyToUpdate.amount" name="amountUpd" />
        </span>
      </td>
      <td>
        <span *ngIf="supplyToUpdate == null || supplyToUpdate.id != row.id">{{row.date}}</span>
        <span *ngIf="supplyToUpdate != null && supplyToUpdate.id == row.id">
          <input class="tab" type="date" [(ngModel)]="supplyToUpdate.date" name="dateUpd" />
        </span>
      </td>
      <td *ngIf="supplyToUpdate == null">
        <button class="tab" (click)="delete(row.id)">Удалить</button>
      </td>
      <td *ngIf="supplyToUpdate == null">
        <button class="tab" (click)="update(row)">Изменить</button>
      </td>
    </tr>
  </tbody>
</table>
<button *ngIf="supplyToUpdate != null" class="save" (click)="save()">Сохранить</button>
